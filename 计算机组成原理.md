# 计算机组成原理
***
## 总论
***
### 冯诺依曼计算机的特点
* **“存储程序”**（现代计算机的基本结构，以此概念为基础的各类计算机都称为冯诺依曼计算机）：指令以代码的形式事先输入计算机主存储器，然后按其在存储器中首地址执行程序的第一条指令，以后就按照该程序的规定顺序执行其他指令，直至程序执行结束。
* **五大部件**：运算器、控制器、存储器、输入和输出
* **指令和数据同等地位存储在存储器中，均用二进制表示，通过执行阶段进行区分**
* **指令**在存储器内**顺序存放**
* **指令由操作码和地址码组成**
* 早期冯诺依曼计算机**以运算器为中心**——**“控制流”**驱动方式
* 顺序执行方式（串行执行方式）
***
### 寄存器s
运算器|名称
--|--
MQ|Multiple-Quotient Register
ACC|Accumulator
ALU|Arithmetic and logic Unit（算术逻辑单元）
X|通用寄存器（X表任意）
PSW|Program Status Word

控制器|名称|功能
--|--|--|
CU|Control Unit|分析指令，给出控制信号
IR|Instruction Register|存放当前执行的指令
PC|Program Counter|存放指令地址，有自动加1功能
***
### 软件和硬件在逻辑功能实现上 等效 不等价
***
### 计算硬件能够直接执行的是 机器语言程序
***
## 数据表示与运算
#### 进制表示
进制种类|缩写|英文|
--|--|--|--|
二进制|B|Binary|
八进制|O|Octal|
十进制|D|Decimal|
十六进制|H|Hexadecimal|
***
#### ASCII编码
ASCII码使用7位二进制编码表示，从000 0000到111 1111共128种编码。但是字节是计算机存储的基本单位，故在最高位加0.
*** 
#### 校验码码距
* 任意两个码字之间最少变化的二进制位数称为码距，码距**大于等于2的校验码**开始具有检错能力
* 码距越大，检错、纠错能力越强
* 海明码码距大于2，故能检错和纠错
* 仅靠增加奇偶位位数不能提高准确性，还要考虑码距
* CRC用于链路层，适合大量数据传输；CRC可以纠正一位或多位错误（由多项式决定），实际传输中的纠错方式按需求决定
    * 请求重发
    * 通过余数值自行纠正
    * 删除数据
***
#### 大端存储 vs 小端存储
大端：由高位到低位，符合人类阅读习惯
小端：从低位到高位，便于机器处理（计算机处理长度有限时，先读入低字节）
***
### 二进制计算(定点数)
* 原码：正号转1，负号转0；在不改变大小的前提下补位为一个字节
* 补码（反向操作流程不变）
    * 正数：补码=原码
    * 负数：原码符号位不变，数值位取反加1
    * 其中，[X]<sub>补</sub> -> [-X]<sub>补</sub> 连同符号位一起取反（无论正负）
* 反码
    * 正数：反码=原码
    * 负数：符号位不变，其余取反
* 加法
    * 用补码实现
        * A+B转换成[A+B]<sub>补</sub> -> [A]<sub>补</sub>+[B]<sub>补</sub>
        * A-B转换成[A-B]<sub>补</sub> -> [A]<sub>补</sub>+[-B]<sub>补</sub>
        * 若出现溢出情况，见溢出判断 
* 减法（转换为加法）
* 移位
    * 正数：补0
    * 负数
        * 原码：补0
        * 反码：补1
        * 补码：左移补0，右移补1
* 乘法
    * 原码一位乘法（加法和移位）
        * 符号单独处理：异或
        * 数值位取绝对值进行乘法运算。乘积低位乘完舍弃，结果右移 p18 b站
        * 每次要么加0，要么加被乘数
    * 补码一位乘法（多一次加法）
        * 每次加的内容
            * 辅助位-MQ中最低位=1，加[x]<sub>补</sub>
            *  辅助位-MQ中最低位=0，加0
            * 辅助位-MQ中最低位=-1，加[-x]<sub>补</sub>
        * 右移是算数右移（补和符号位相同的数）
* 除法
    * 原码
        * 恢复余数法
        * 加减交替法（不恢复余数法）
    * 补码
        * 采用加减交替法，但是符号位参与运算

### 补码，反码，移码的表示范围和特殊值
类型|原码|补码|反码|移码
--|--|--|--|--|
零的表示|0 0000和1 0000|0.0000|0.0000和1.1111|100···0（n个0）
范围|[-（2<sup>n</sup>-1）,2<sup>n</sup>-1]|[-2<sup>n</sup>,2<sup>n</sup>-1]|[-（1-2<sup>-n</sup>）,1-2<sup>-n</sup>]|[-2<sup>n</sup>,2<sup>n</sup>-1]
特殊| |1.000为-1|

### 溢出判断
补码范围：-128~127
溢出情况：
* 正数+正数->上溢->正+正=负
* 负数+负数->下溢->负+负=正
判断方法：(对补码)
* 一位符号位,使用溢出表达式
    * V = A<sub>s</sub>B<sub>s</sub>$\overline{\text{Ss}}$+$\overline{\text{As}}$ $\overline{\text{Bs}}$S<sub>s</sub>
    * v=0,无溢出
    * v=1,有溢出
* 一位符号位，使用进位情况
* 双符号位
    * 01 上溢
    * 10 下溢 

  双符号位补码称为**模4补码，单符号位补码称为**模2补码**
情况|符号位进位|最高数值位进位
--|--|--|
上溢|0|1|
下溢|1|0|


***

## 按字寻址，按半字寻址，按字节寻址
现代计算机通常按字节编址，每个字节对应一个地址。
寻址方式分为按字寻址，按半字寻址，按字节寻址。
若计算机存储子长为32位，按字寻址，一次可以访问4个字节。每次访存只能读/写1个字。
***
## 浮点数
* 定点数的表示数字范围有限


阶码|阶码|尾数|尾数|
--|--|--|--|
阶符|阶码的数值部分|数符|尾数的数值部分|

阶码E，尾数M
浮点数的真值：N=r<sup>E</sup >x M  
阶码E反映浮点数的表示范围和小数点的实际位置  
尾数M的数值部分的位数n反映了浮点数的精读

尽量保持精度：
浮点数位数的规格化（参考科学计数法）（左规、右规 ），还要考虑溢出的情况
* 原码：
最高数值 
***
## 存储系统
### 存储器按照存取方式分类
RAM
SAM
DAM
CAM：快表
***
### 死区
分散刷新不存在死区，但是每个读写周期时间翻倍（不存在无法访存的情况，但每一次访存时间过长）
### DRAM芯片的引脚数量
地址线（只需一半）+数据线+读写控制线+行列通选线（2，包括了片选线）
### 各种类型数据的位数
### 数据交换的单位
* CPU和主存，CPU和Cache的交换单位为字
* 主存和Cache的交换单位为块
* 主存和辅存的交换单位为页或者段 
